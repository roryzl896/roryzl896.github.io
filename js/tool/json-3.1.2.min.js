"use strict";(()=>{function R(e){return Object.prototype.toString.call(e)}function p(e){throw new TypeError("unsupported data type: "+R(e))}function x(e){throw new TypeError("unsupported data type: "+e)}var c="";for(let e=0;e<10;e++){let t=String.fromCharCode(48+e);c+=t}for(let e=0;e<26;e++){let t=String.fromCharCode(65+e);c+=t}for(let e=0;e<26;e++){let t=String.fromCharCode(97+e);c+=t}var l=c.length,k={};for(let e=0;e<l;e++){let t=c[e];k[t]=e}function g(e){let t=0,n=1;for(let r=e.length-1;r>=0;r--){let o=e[r],i=k[o];i*=n,t+=i,n*=l}return t}function P(e){let t=BigInt(0),n=BigInt(1),r=BigInt(l);for(let o=e.length-1;o>=0;o--){let i=e[o],a=BigInt(k[i]);a*=n,t+=a,n*=r}return t}function S(e){if(e===0)return c[0];let t=[];for(;e!==0;){let n=e%l,r=c[n];t.push(r),e-=n,e/=l}return t.reverse().join("")}function Y(e){let t=BigInt(0),n=BigInt(l);if(e===t)return c[0];let r=[];for(;e!==t;){let o=e%n,i=c[Number(o)];r.push(i),e/=n}return r.reverse().join("")}function w(e){return e.split("").reverse().join("")}function y(e){if(e<0)return"-"+y(-e);let[t,n]=e.toString().split(".");if(!n)if(t.includes("e")){let[i,a]=t.split("e");t=i,n="0e"+a}else return S(e);let r;n&&([n,r]=n.split("e")),t=_(t),n=w(n),n=_(n);let o=t+"."+n;if(r){switch(o+=".",r[0]){case"+":r=r.slice(1);break;case"-":o+="-",r=r.slice(1);break}r=_(r),o+=r}return o}function _(e){let t=+e;return t.toString()===e&&t+1!==t&&t-1!==t?S(t):":"+Y(BigInt(e))}function v(e){return e[0]===":"?P(e.substring(1)).toString():g(e).toString()}function V(e){if(e[0]==="-")return-V(e.substr(1));let[t,n,r]=e.split(".");if(!n)return g(t);t=v(t),n=v(n),n=w(n);let o=t+"."+n;if(r){o+="e";let i=!1;r[0]==="-"&&(i=!0,r=r.slice(1)),r=v(r),o+=i?-r:+r}return+o}function I(e){return"n|"+y(e)}function T(e){return e=e.replace("n|",""),V(e)}function K(e){return typeof e=="number"?e:g(e)}function N(e){return e?"b|T":"b|F"}function C(e){switch(e){case"b|T":return!0;case"b|F":return!1}return!!e}function M(e){switch(e[0]+e[1]){case"b|":case"o|":case"n|":case"a|":case"s|":e="s|"+e}return e}function j(e){return e[0]+e[1]==="s|"?e.substr(2):e}var m={sort_key:!1,error_on_nan:!1,error_on_infinite:!1};function A(e){return e.store.toArray()}function z(){let e=[];return{forEach(t){for(let n=0;n<e.length;n++)if(t(e[n])==="break")return},add(t){e.push(t)},toArray(){return e}}}function G(){let e=Object.create(null),t=Object.create(null);return{getValue(n){return e[n]},getSchema(n){return t[n]},forEachValue(n){for(let[r,o]of Object.entries(e))if(n(r,o)==="break")return},forEachSchema(n){for(let[r,o]of Object.entries(t))if(n(r,o)==="break")return},setValue(n,r){e[n]=r},setSchema(n,r){t[n]=r},hasValue(n){return n in e},hasSchema(n){return n in t}}}function B(){return{store:z(),cache:G(),keyCount:0}}function s(e,t){if(e.cache.hasValue(t))return e.cache.getValue(t);let n=e.keyCount++,r=y(n);return e.store.add(t),e.cache.setValue(t,r),r}function J(e,t){m.sort_key&&t.sort();let n=t.join(",");if(e.cache.hasSchema(n))return e.cache.getSchema(n);let r=u(e,t,void 0);return e.cache.setSchema(n,r),r}function u(e,t,n){if(t===null)return"";switch(typeof t){case"undefined":if(Array.isArray(n))return u(e,null,n);break;case"object":if(t===null)return s(e,null);if(Array.isArray(t)){let r="a";for(let o=0;o<t.length;o++){let i=t[o],a=i===null?"_":u(e,i,t);r+="|"+a}return r==="a"&&(r="a|"),s(e,r)}else{let r=Object.keys(t);if(r.length===0)return s(e,"o|");let o="o",i=J(e,r);o+="|"+i;for(let a of r){let f=t[a],h=u(e,f,t);o+="|"+h}return s(e,o)}case"boolean":return s(e,N(t));case"number":return Number.isNaN(t)?(m.error_on_nan&&x("[number NaN]"),""):Number.POSITIVE_INFINITY===t||Number.NEGATIVE_INFINITY===t?(m.error_on_infinite&&x("[number Infinity]"),""):s(e,I(t));case"string":return s(e,M(t))}return p(t)}function E(e){let t=B(),n=u(t,e,void 0);return[A(t),n]}function L(e,t){if(t==="o|")return{};let n={},r=t.split("|"),o=r[1],i=d(e,o),a=r.length;a-2===1&&!Array.isArray(i)&&(i=[i]);for(let f=2;f<a;f++){let h=i[f-2],b=r[f];b=d(e,b),n[h]=b}return n}function q(e,t){if(t==="a|")return[];let n=t.split("|"),r=n.length-1,o=new Array(r);for(let i=0;i<r;i++){let a=n[i+1];a=d(e,a),o[i]=a}return o}function d(e,t){if(t===""||t==="_")return null;let n=K(t),r=e[n];if(r===null)return r;switch(typeof r){case"undefined":return r;case"number":return r;case"string":switch(r[0]+r[1]){case"b|":return C(r);case"o|":return L(e,r);case"n|":return T(r);case"a|":return q(e,r);default:return j(r)}}return p(r)}function O(e){let[t,n]=e;return d(t,n)}function U(e){for(let t in e)e[t]===void 0&&delete e[t]}function D(e){F(e,new Set)}function F(e,t){t.add(e);for(let n in e)if(e[n]===void 0)delete e[n];else{let r=e[n];r&&typeof r=="object"&&!t.has(r)&&F(r,t)}}var H={compress:E,decompress:O,decode:d,addValue:u,trimUndefined:U,trimUndefinedRecursively:D};Object.assign(window,{compressJSON:H});})();
